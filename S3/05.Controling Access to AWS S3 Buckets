* Controlling Access to AWS S3 Buckets

- Controlling access determines who can view, modify, or delete the objects stored in your AWS S3 bucket.

* Access Control Tools:

1. IAM Policies – Level 1
- Applied to users, groups, or roles to define permissions across AWS services, including S3.

2.Bucket Policies – Level 2
- Applied directly to the S3 bucket to control access for specific users, accounts, or roles.

3.ACLs (Access Control Lists) – Level 3 (Legacy, not recommended)
- Optional and mostly deprecated. Used for fine-grained control but better avoided in modern setups.

* Best Practices:
-Disable public access by default.
-Prefer IAM Policies and Bucket Policies over ACLs.

* Rule Table

+----------------+-----------------+-----------------+------------------+
|  IAM Policy	 |  Bucket Policy  |  ACL	     |	Outcome         |
+----------------+-----------------+-----------------+------------------+
|  Not Attached	 |  Not Attached   |  Not Attached   |	Access Denied   |
|  Not Attached	 |  Not Attached   |  Allows Access  |	Access Granted  |
|  Not Attached	 |  Allows Access  |  Not Attached   |	Access Granted  |
|  Not Attached	 |  Allows Access  |  Allows Access  |	Access Granted  |
|  Allows Access |  Not Attached   |  Not Attached   |	Access Granted  |
|  Allows Access |  Not Attached   |  Allows Access  |	Access Granted  |
|  Allows Access |  Allows Access  |  Not Attached   |	Access Granted  |
|  Allows Access |  Allows Access  |  Allows Access  |	Access Granted  |
+----------------+-----------------+-----------------+------------------+


Note: A single deny rule in the IAM policy, bucket policy, or ACL (if present) will result in denial of access.


* IAM Policies Vs Bucket Policies

+---------------+----------------------------------------+-----------------------------------+
| Feature       | IAM Policy                             | Bucket Policy                     |
+---------------+----------------------------------------+-----------------------------------+
| Management    | Managed via the IAM dashboard          | Managed via the S3 dashboard      |
| Format        | JSON                                   | JSON                              |
| Scope         | Applies to AWS services/Identity-based | Applies S3 buckets/Resource-based |
| Use Cases     | Broad AWS permissions                  | Specific S3 permissions           |
| Attached To   | IAM users, groups, roles               | S3 buckets                        |
| Best for      | Multiple AWS services                  | Specific S3 access                |
| Cross-Account | Complex configuration                  | Ideal for S3 cross-account        |
| Public Access | Not Applicable                         | Explicit public access control    |
+---------------+----------------------------------------+-----------------------------------+


* IAM policy:
- Created in IAM.
- Attached to a user, group, or role.
- Defines what that identity can do across AWS (including S3, EC2, etc.).

* S3 bucket policy:
- Created on the bucket itself.
- Attached to the bucket (not the user).
- Defines what specific principals (IAM users, roles, AWS accounts) can do to that bucket.

* There are 3 way to access a s3 bucket
- AWS Console				-------+ Less used ig, for testing purposes
- AWS cli				-------+ Used mainly 90%
- Using code (Programatical Access)	-------+ Used mainly 90% (Both are used majorly to deal with s3)

+ When we try to access bucket using AWS CLI or With Programatical Access we do not need IAM Policy
+ When we access s3 from console we will have to create iam user and policy accordingly we wont have access without iam policy in graphical interface 
